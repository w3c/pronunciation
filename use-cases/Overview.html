<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 35.4.3">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-color:var(--warning-border,#f11);border-width:.2em;border-style:solid;background:#fbe9e9;background:var(--warning-bg,#fbe9e9);color:#000;color:var(--text,#000)}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
		
<title>Pronunciation Use Cases</title>
		
		
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:italic}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
		
		

	
<meta name="color-scheme" content="light">
<meta name="description" content="This document was previously merged into the Pronunciation Gap Analysis and Use
					Cases. The working group now intends to separate
				it again and
				continue work on this document independently.">
<link rel="canonical" href="https://www.w3.org/TR/pronunciation-use-case/">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var:hover{text-decoration:underline;cursor:pointer}
var.respec-hl{color:var(--color,#000);background-color:var(--bg-color);box-shadow:0 0 0 2px var(--bg-color)}
@media (prefers-color-scheme:dark){
var.respec-hl{filter:saturate(.9) brightness(.9)}
}
var.respec-hl-c1{--bg-color:#f4d200}
var.respec-hl-c2{--bg-color:#ff87a2}
var.respec-hl-c3{--bg-color:#96e885}
var.respec-hl-c4{--bg-color:#3eeed2}
var.respec-hl-c5{--bg-color:#eacfb6}
var.respec-hl-c6{--bg-color:#82ddff}
var.respec-hl-c7{--bg-color:#ffbcf2}
@media print{
var.respec-hl{background:0 0;color:#000;box-shadow:unset}
}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#222}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#222;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "trace": true,
  "doRDFa": "1.0",
  "includePermalinks": true,
  "permalinkEdge": true,
  "permalinkHide": false,
  "tocIntroductory": true,
  "specStatus": "DNOTE",
  "noRecTrack": true,
  "shortName": "pronunciation-use-case",
  "copyrightStart": "2025",
  "license": "w3c-software-doc",
  "edDraftURI": "https://w3c.github.io/pronunciation/user-scenarios",
  "editors": [
    {
      "name": "Paul Grenier",
      "url": "https://www.w3.org/users/112867",
      "company": "Invited Expert",
      "w3cid": 111500
    },
    {
      "name": "Irfan Ali",
      "url": "https://www.w3.org/users/139064",
      "company": "BlackRock",
      "w3cid": 139064
    }
  ],
  "group": "apa",
  "github": "w3c/pronunciation",
  "publishISODate": "2025-08-07T00:00:00.000Z",
  "generatedSubtitle": "W3C Group Draft Note 07 August 2025"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-DNOTE"></head>
	<body class="h-entry informative" data-new-gr-c-s-check-loaded="14.1247.0" data-gr-ext-installed=""><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">Pronunciation Use Cases</h1> 
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#DNOTE">W3C Group Draft Note</a> <time class="dt-published" datetime="2025-08-07">07 August 2025</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2025/DNOTE-pronunciation-use-case-20250807/">https://www.w3.org/TR/2025/DNOTE-pronunciation-use-case-20250807/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/pronunciation-use-case/">https://www.w3.org/TR/pronunciation-use-case/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/pronunciation/user-scenarios">https://w3c.github.io/pronunciation/user-scenarios</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/pronunciation-use-case/">https://www.w3.org/standards/history/pronunciation-use-case/</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/pronunciation/commits/">Commit history</a>
                  </dd>
        
        
        
        
        
        <dt>Editors:</dt><dd class="editor p-author h-card vcard" data-editor-id="111500">
    <a class="u-url url p-name fn" href="https://www.w3.org/users/112867">Paul Grenier</a> (<span class="p-org org h-org">Invited Expert</span>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="139064">
    <a class="u-url url p-name fn" href="https://www.w3.org/users/139064">Irfan Ali</a> (<span class="p-org org h-org">BlackRock</span>)
  </dd>
        
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/pronunciation/">GitHub w3c/pronunciation</a>
        (<a href="https://github.com/w3c/pronunciation/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/pronunciation/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/pronunciation/issues/">open issues</a>)
      </dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/policies/#copyright">Copyright</a>
    ©
    2025
    
    <a href="https://www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/copyright/software-license-2023/" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>

		<section id="abstract" class="introductory"><h2>Abstract</h2>
			<div class="note" id="issue-container-generatedID"><div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3"><span>Editor's note</span></div><p class="">This document was previously merged into the <a href="https://www.w3.org/TR/pronunciation-gap-analysis-and-use-cases/">Pronunciation Gap Analysis and Use
					Cases</a>. The working group now intends to separate
				it again and
				continue work on this document independently.</p></div>
            
			<p>The objective of the Pronunciation Task Force is to develop normative specifications and best practices guidance collaborating with other <abbr title="World Wide Web Consortium">W3C</abbr> groups as appropriate, to provide for proper pronunciation in HTML content when using text to speech (TTS) synthesis. This document provides various use cases highlighting the need for standardization of pronunciation markup, to ensure that consistent and accurate representation of the content. The requirements from the user scenarios provide the basis for these technical requirements/specifications.</p>
		</section>

		<section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the
      <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> standards and drafts index</a>.</em></p><p>
    This document was published by the <a href="https://www.w3.org/groups/wg/apa">Accessible Platform Architectures Working Group</a> as
    a Group Draft Note using the
        <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">Note track</a>. 
  </p><p>Group Draft Notes are not endorsed by
        <abbr title="World Wide Web Consortium">W3C</abbr> nor its Members. </p><p>
    This is a draft document and may be updated, replaced, or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than a work in progress.
    
  </p><p data-deliverer="83907">
    
        The
        <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>
        does not carry any licensing requirements or commitments on this
        document.
      
    
  </p><p>
                      This document is governed by the
                      <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">03 November 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                    </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#use-case-aria-ssml"><bdi class="secno">2. </bdi>Use Case aria-ssml</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice"><bdi class="secno">2.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal"><bdi class="secno">2.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience"><bdi class="secno">2.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options"><bdi class="secno">2.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work"><bdi class="secno">2.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations"><bdi class="secno">2.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-data-ssml"><bdi class="secno">3. </bdi>Use Case data-ssml</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice-0"><bdi class="secno">3.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal-0"><bdi class="secno">3.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience-0"><bdi class="secno">3.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options-0"><bdi class="secno">3.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work-0"><bdi class="secno">3.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations-0"><bdi class="secno">3.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-html5"><bdi class="secno">4. </bdi>Use Case HTML5</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice-1"><bdi class="secno">4.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal-1"><bdi class="secno">4.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience-1"><bdi class="secno">4.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options-1"><bdi class="secno">4.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work-1"><bdi class="secno">4.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations-1"><bdi class="secno">4.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-custom-element"><bdi class="secno">5. </bdi>Use Case Custom Element</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice-2"><bdi class="secno">5.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal-2"><bdi class="secno">5.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience-2"><bdi class="secno">5.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options-2"><bdi class="secno">5.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work-2"><bdi class="secno">5.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations-2"><bdi class="secno">5.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-json-ld"><bdi class="secno">6. </bdi>Use Case JSON-LD</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice-3"><bdi class="secno">6.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal-3"><bdi class="secno">6.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience-3"><bdi class="secno">6.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options-3"><bdi class="secno">6.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work-3"><bdi class="secno">6.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations-3"><bdi class="secno">6.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-ruby"><bdi class="secno">7. </bdi>Use Case Ruby</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-current-practice-4"><bdi class="secno">7.1 </bdi>Background and Current Practice</a></li><li class="tocline"><a class="tocxref" href="#goal-4"><bdi class="secno">7.2 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#target-audience-4"><bdi class="secno">7.3 </bdi>Target Audience</a></li><li class="tocline"><a class="tocxref" href="#implementation-options-4"><bdi class="secno">7.4 </bdi>Implementation Options</a></li><li class="tocline"><a class="tocxref" href="#existing-work-4"><bdi class="secno">7.5 </bdi>Existing Work</a></li><li class="tocline"><a class="tocxref" href="#problems-and-limitations-4"><bdi class="secno">7.6 </bdi>Problems and Limitations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#user-scenarios"><bdi class="secno">8. </bdi>User Scenarios</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#end-consumer-of-tts"><bdi class="secno">8.1 </bdi>End-Consumer of TTS</a></li><li class="tocline"><a class="tocxref" href="#digital-content-management-for-tts"><bdi class="secno">8.2 </bdi>Digital Content Management for TTS</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#educational-assessment"><bdi class="secno">8.2.1 </bdi>Educational Assessment</a></li><li class="tocline"><a class="tocxref" href="#academic-and-linguistic-practitioners"><bdi class="secno">8.2.2 </bdi>Academic and Linguistic Practitioners </a></li></ol></li><li class="tocline"><a class="tocxref" href="#software-application-development"><bdi class="secno">8.3 </bdi>Software Application Development</a></li></ol></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">A. </bdi>Acknowledgments</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ack_group"><bdi class="secno">A.1 </bdi>Participants active in the Pronunciation TF at the time of publication</a></li></ol></li></ol></nav>

		<section class="informative" id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div><p><em>This section is non-normative.</em></p>

			
     
            <p>This document provides use cases which describe specific implmentation approaches for introducing pronunciation
				and spoken presentation authoring markup into HTML5. These approaches are based on the two primary approaches 
				that have evolved from the Pronunciation Task Force members.  Other approaches may appear in subsequent working drafts.
			</p>
			<p>Successful use cases will be those that provide ease of authoring and consumption by assistive technologies and user 
				agents that utilize synthetic speech for spoken presentation of web content. The most challenging aspect of consumption may
				be alignment of the markup approach with the standard mechanisms by which assistive technologies, specifically screen
				readers, obtain content via platform accessibility APIs.
			</p>
			
			

		</section>
		<section id="use-case-aria-ssml"><div class="header-wrapper"><h2 id="x2-use-case-aria-ssml"><bdi class="secno">2. </bdi>Use Case aria-ssml</h2><a class="self-link" href="#use-case-aria-ssml" aria-label="Permalink for Section 2."></a></div>
			
			<section id="background-and-current-practice"><div class="header-wrapper"><h3 id="x2-1-background-and-current-practice"><bdi class="secno">2.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice" aria-label="Permalink for Section 2.1"></a></div>
				
				<p>A new <code>aria</code> attribute could be used to include pronunciation content.</p>
			</section>
			<section id="goal"><div class="header-wrapper"><h3 id="x2-2-goal"><bdi class="secno">2.2 </bdi>Goal</h3><a class="self-link" href="#goal" aria-label="Permalink for Section 2.2"></a></div>
				
				<p>Embed SSML in an HTML document.</p>
			</section>
			<section id="target-audience"><div class="header-wrapper"><h3 id="x2-3-target-audience"><bdi class="secno">2.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience" aria-label="Permalink for Section 2.3"></a></div>
				
				<ul>
					<li>Assistive Technology</li>
					<li>Browser Extensions</li>
					<li>Search Engines</li>
				</ul>
			</section>
			<section id="implementation-options"><div class="header-wrapper"><h3 id="x2-4-implementation-options"><bdi class="secno">2.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options" aria-label="Permalink for Section 2.4"></a></div>
				
				<p><strong>aria-ssml as embedded JSON</strong></p>
				<p>When AT encounters an element with aria-ssml, the AT should enhance the UI by processing the pronunciation content and passing it to the <a href="https://w3c.github.io/speech-api/">Web Speech API</a> or an external API (e.g., <a href="https://cloud.google.com/text-to-speech/">Google's Text to Speech API</a>).</p>
				<div class="example" id="example-1">
        <div class="marker">
    <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml">I say <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-ssml</span>=<span class="hljs-string">'{"phoneme":{"ph":"pɪˈkɑːn","alphabet":"ipa"}}'</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.
You say <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-ssml</span>=<span class="hljs-string">'{"phoneme":{"ph":"ˈpi.kæn","alphabet":"ipa"}}'</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.</code></pre>
      </div>
				<p>Client will convert JSON to SSML and pass the XML string a speech API.</p>
				<div class="example" id="example-2">
        <div class="marker">
    <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
msg.<span class="hljs-property">text</span> = <span class="hljs-title function_">convertJSONtoSSML</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'aria-ssml'</span>));
speechSynthesis.<span class="hljs-title function_">speak</span>(msg);</code></pre>
      </div>
				<p><strong>aria-ssml referencing XML by template ID</strong></p>
				<div class="example" id="example-3">
        <div class="marker">
    <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- ssml must appear inside a template to be valid --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pecan"</span>&gt;</span>
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">speak</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span>
       <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis
                   http://www.w3.org/TR/speech-synthesis11/synthesis.xsd"</span>
       <span class="hljs-attr">xml:lang</span>=<span class="hljs-string">"en-US"</span>&gt;</span>
    You say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
    I say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">aria-ssml</span>=<span class="hljs-string">"#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will parse XML and serialize it before passing to a speech API:</p>
				<div class="example" id="example-4">
        <div class="marker">
    <a class="self-link" href="#example-4">Example<bdi> 4</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
<span class="hljs-keyword">var</span> xml = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pecan'</span>).<span class="hljs-property">content</span>.<span class="hljs-property">firstElementChild</span>;
msg.<span class="hljs-property">text</span> = <span class="hljs-title function_">serialize</span>(xml);
speechSynthesis.<span class="hljs-title function_">speak</span>(msg);</code></pre>
      </div>

				<p><strong>aria-ssml referencing an XML string as script tag</strong></p>
				<div class="example" id="example-5">
        <div class="marker">
    <a class="self-link" href="#example-5">Example<bdi> 5</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pecan"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/ssml+xml"</span>&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">speak</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span>
       <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis
                   http://www.w3.org/TR/speech-synthesis11/synthesis.xsd"</span>
       <span class="hljs-attr">xml:lang</span>=<span class="hljs-string">"en-US"</span>&gt;</span>
    You say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
    I say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">aria-ssml</span>=<span class="hljs-string">"#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will pass the XML string raw to a speech API.</p>
				<div class="example" id="example-6">
        <div class="marker">
    <a class="self-link" href="#example-6">Example<bdi> 6</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
msg.<span class="hljs-property">text</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pecan'</span>).<span class="hljs-property">textContent</span>;
speechSynthesis.<span class="hljs-title function_">speak</span>(msg);</code></pre>
      </div>
				<p><strong>aria-ssml referencing an external XML document by URL</strong></p>
				<div class="example" id="example-7">
        <div class="marker">
    <a class="self-link" href="#example-7">Example<bdi> 7</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">aria-ssml</span>=<span class="hljs-string">"http://example.com/pronounce.ssml#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will pass the string payload to a speech API.</p>
				<div class="example" id="example-8">
        <div class="marker">
    <a class="self-link" href="#example-8">Example<bdi> 8</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs abnf">var msg <span class="hljs-operator">=</span> new SpeechSynthesisUtterance()<span class="hljs-comment">;</span>
var response <span class="hljs-operator">=</span> await fetch(el.dataset.ssml)
msg.txt <span class="hljs-operator">=</span> await response.text()<span class="hljs-comment">;</span>
speechSynthesis.speak(msg)<span class="hljs-comment">;</span></code></pre>
      </div>
			</section>
			<section id="existing-work"><div class="header-wrapper"><h3 id="x2-5-existing-work"><bdi class="secno">2.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work" aria-label="Permalink for Section 2.5"></a></div>
				
				<ul>
					<li><a href="https://github.com/alia11y/SSMLinHTMLproposal">aria-ssml proposal</a></li>
					<li><a href="https://www.w3.org/TR/speech-synthesis11/">SSML</a></li>
					<li><a href="https://w3c.github.io/speech-api/">Web Speech API</a></li>
				</ul>
			</section>
			<section id="problems-and-limitations"><div class="header-wrapper"><h3 id="x2-6-problems-and-limitations"><bdi class="secno">2.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations" aria-label="Permalink for Section 2.6"></a></div>
				
				<ul>
					<li>aria-ssml is not a valid aria-* attribute.</li>
					<li>OS/Browsers combinations that do not support the serialized XML usage of the Web Speech API.</li>
				</ul>
			</section>
			
		</section>

		<section id="use-case-data-ssml"><div class="header-wrapper"><h2 id="x3-use-case-data-ssml"><bdi class="secno">3. </bdi>Use Case data-ssml</h2><a class="self-link" href="#use-case-data-ssml" aria-label="Permalink for Section 3."></a></div>
			
			<section id="background-and-current-practice-0"><div class="header-wrapper"><h3 id="x3-1-background-and-current-practice"><bdi class="secno">3.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice-0" aria-label="Permalink for Section 3.1"></a></div>
				
				<p>As an existing attribute, data-* could be used, with some conventions, to include pronunciation content.</p>
			</section>
			<section id="goal-0"><div class="header-wrapper"><h3 id="x3-2-goal"><bdi class="secno">3.2 </bdi>Goal</h3><a class="self-link" href="#goal-0" aria-label="Permalink for Section 3.2"></a></div>
				
				<ul>
					<li>Support repeated use within the page context</li>
					<li>Support external file references</li>
					<li>Reuse existing techniques without expanding specifications</li>
				</ul>
			</section>
			<section id="target-audience-0"><div class="header-wrapper"><h3 id="x3-3-target-audience"><bdi class="secno">3.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience-0" aria-label="Permalink for Section 3.3"></a></div>
				
				<p>Hearing users</p>
			</section>
			<section id="implementation-options-0"><div class="header-wrapper"><h3 id="x3-4-implementation-options"><bdi class="secno">3.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options-0" aria-label="Permalink for Section 3.4"></a></div>
				
				<p><strong>data-ssml as embedded JSON</strong></p>
				<p>When an element with data-ssml is encountered by an SSML-aware AT, the AT should enhance the user interface by processing the referenced SSML content and passing it to the <a href="https://w3c.github.io/speech-api/">Web Speech API</a> or an external API (e.g., <a href="https://cloud.google.com/text-to-speech/">Google's Text to Speech API</a>).</p>
				<div class="example" id="example-9">
        <div class="marker">
    <a class="self-link" href="#example-9">Example<bdi> 9</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>The Pronunciation of Pecan<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">speak</span>&gt;</span>
I say <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ssml</span>=<span class="hljs-string">'{"phoneme":{"ph":"pɪˈkɑːn","alphabet":"ipa"}}'</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.
You say <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ssml</span>=<span class="hljs-string">'{"phoneme":{"ph":"ˈpi.kæn","alphabet":"ipa"}}'</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.</code></pre>
      </div>
				<p>Client will convert JSON to SSML and pass the XML string a speech API.</p>
				<div class="example" id="example-10">
        <div class="marker">
    <a class="self-link" href="#example-10">Example<bdi> 10</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs abnf">var msg <span class="hljs-operator">=</span> new SpeechSynthesisUtterance()<span class="hljs-comment">;</span>
msg.text <span class="hljs-operator">=</span> convertJSONtoSSML(element.dataset.ssml)<span class="hljs-comment">;</span>
speechSynthesis.speak(msg)<span class="hljs-comment">;</span></code></pre>
      </div>

				<p><strong>data-ssml referencing XML by template ID</strong></p>
				<div class="example" id="example-11">
        <div class="marker">
    <a class="self-link" href="#example-11">Example<bdi> 11</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- ssml must appear inside a template to be valid --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pecan"</span>&gt;</span>
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">speak</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span>
       <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis
                   http://www.w3.org/TR/speech-synthesis11/synthesis.xsd"</span>
       <span class="hljs-attr">xml:lang</span>=<span class="hljs-string">"en-US"</span>&gt;</span>
    You say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
    I say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-ssml</span>=<span class="hljs-string">"#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will parse XML and serialize it before passing to a speech API:</p>
				<div class="example" id="example-12">
        <div class="marker">
    <a class="self-link" href="#example-12">Example<bdi> 12</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
<span class="hljs-keyword">var</span> xml = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pecan'</span>).<span class="hljs-property">content</span>.<span class="hljs-property">firstElementChild</span>;
msg.<span class="hljs-property">text</span> = <span class="hljs-title function_">serialize</span>(xml);
speechSynthesis.<span class="hljs-title function_">speak</span>(msg);</code></pre>
      </div>

				<p><strong>data-ssml referencing an XML string as script tag</strong></p>
				<div class="example" id="example-13">
        <div class="marker">
    <a class="self-link" href="#example-13">Example<bdi> 13</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pecan"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/ssml+xml"</span>&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">speak</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span>
       <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.w3.org/2001/10/synthesis
                   http://www.w3.org/TR/speech-synthesis11/synthesis.xsd"</span>
       <span class="hljs-attr">xml:lang</span>=<span class="hljs-string">"en-US"</span>&gt;</span>
    You say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
    I say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-ssml</span>=<span class="hljs-string">"#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will pass the XML string raw to a speech API.</p>
				<div class="example" id="example-14">
        <div class="marker">
    <a class="self-link" href="#example-14">Example<bdi> 14</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
msg.<span class="hljs-property">text</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pecan'</span>).<span class="hljs-property">textContent</span>;
speechSynthesis.<span class="hljs-title function_">speak</span>(msg);</code></pre>
      </div>
				<p><strong>data-ssml referencing an external XML document by URL</strong></p>
				<div class="example" id="example-15">
        <div class="marker">
    <a class="self-link" href="#example-15">Example<bdi> 15</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-ssml</span>=<span class="hljs-string">"http://example.com/pronounce.ssml#pecan"</span>&gt;</span>You say, pecan. I say, pecan.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
				<p>Client will pass the string payload to a speech API.</p>
				<div class="example" id="example-16">
        <div class="marker">
    <a class="self-link" href="#example-16">Example<bdi> 16</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs abnf">var msg <span class="hljs-operator">=</span> new SpeechSynthesisUtterance()<span class="hljs-comment">;</span>
var response <span class="hljs-operator">=</span> await fetch(el.dataset.ssml)
msg.txt <span class="hljs-operator">=</span> await response.text()<span class="hljs-comment">;</span>
speechSynthesis.speak(msg)<span class="hljs-comment">;</span></code></pre>
      </div>
			</section>
			<section id="existing-work-0"><div class="header-wrapper"><h3 id="x3-5-existing-work"><bdi class="secno">3.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work-0" aria-label="Permalink for Section 3.5"></a></div>
				
				<ul>
					<li><a href="https://github.com/alia11y/SSMLinHTMLproposal">aria-ssml proposal</a></li>
					<li><a href="https://www.w3.org/TR/speech-synthesis11/">SSML</a></li>
					<li><a href="https://w3c.github.io/speech-api/">Web Speech API</a></li>
				</ul>
			</section>
			<section id="problems-and-limitations-0"><div class="header-wrapper"><h3 id="x3-6-problems-and-limitations"><bdi class="secno">3.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations-0" aria-label="Permalink for Section 3.6"></a></div>
				
				<ul>
					<li>Does not assume or suggest visual pronunciation help for deaf or hard of hearing</li>
					<li>Use of data-* requires input from AT vendors</li>
					<li>XML data is not indexed by search engines</li>
				</ul>
			</section>
		</section>

		<section id="use-case-html5"><div class="header-wrapper"><h2 id="x4-use-case-html5"><bdi class="secno">4. </bdi>Use Case HTML5</h2><a class="self-link" href="#use-case-html5" aria-label="Permalink for Section 4."></a></div>
			
			<section id="background-and-current-practice-1"><div class="header-wrapper"><h3 id="x4-1-background-and-current-practice"><bdi class="secno">4.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice-1" aria-label="Permalink for Section 4.1"></a></div>
				
				<p>HTML5 includes the XML namespaces for MathML and SVG. So, using either's elements in an HTML5 document is valid. Because SSML's implementation is non-visual in nature, browser implementation could be slow or non-existent without affecting how authors use SSML in HTML. Expansion of HTML5 to include SSML namespace would allow valid use of SSML in the HTML5 document. Browsers would treat the element like any other unknown element, as HTMLUnknownElement.</p>
			</section>
			<section id="goal-1"><div class="header-wrapper"><h3 id="x4-2-goal"><bdi class="secno">4.2 </bdi>Goal</h3><a class="self-link" href="#goal-1" aria-label="Permalink for Section 4.2"></a></div>
				
				<ul>
					<li>Support valid use of SSML in HTML5 documents</li>
					<li>Allow visual pronunciation support</li>
				</ul>
			</section>
			<section id="target-audience-1"><div class="header-wrapper"><h3 id="x4-3-target-audience"><bdi class="secno">4.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience-1" aria-label="Permalink for Section 4.3"></a></div>
				
				<ul>
					<li>SSML-aware technologies and browser extensions</li>
					<li>Search indexers</li>
				</ul>
			</section>
			<section id="implementation-options-1"><div class="header-wrapper"><h3 id="x4-4-implementation-options"><bdi class="secno">4.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options-1" aria-label="Permalink for Section 4.4"></a></div>
				
				<p><strong>SSML</strong></p>
				<p>When an element with data-ssml is encountered by an <a href="https://www.w3.org/TR/speech-synthesis11/">SSML</a>-aware AT, the AT should enhance the user interface by processing the referenced SSML content and passing it to the <a href="https://w3c.github.io/speech-api/">Web Speech API</a> or an external API (e.g., <a href="https://cloud.google.com/text-to-speech/">Google's Text to Speech API</a>).</p>
				<div class="example" id="example-17">
        <div class="marker">
    <a class="self-link" href="#example-17">Example<bdi> 17</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>The Pronunciation of Pecan<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">speak</span>&gt;</span>
  You say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
  I say, <span class="hljs-tag">&lt;<span class="hljs-name">phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">phoneme</span>&gt;</span>.
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
			</section>
			<section id="existing-work-1"><div class="header-wrapper"><h3 id="x4-5-existing-work"><bdi class="secno">4.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work-1" aria-label="Permalink for Section 4.5"></a></div>
				
				<ul>
					<li><a href="https://www.w3.org/TR/voicexml21/">VoiceXML 2.1</a></li>
					<li><a href="https://www.w3.org/TR/REC-smil/smil-extended-linking.html#SMILLinking-Relationship-to-XLink">SMIL - Synchronized Multimedia Integration Language</a></li>
					<li><a href="https://www.w3.org/TR/pronunciation-lexicon/#AppB">PLS - Pronunciation Lexicon</a></li>
				</ul>
			</section>
			<section id="problems-and-limitations-1"><div class="header-wrapper"><h3 id="x4-6-problems-and-limitations"><bdi class="secno">4.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations-1" aria-label="Permalink for Section 4.6"></a></div>
				
				<p>SSML is not valid HTML5</p>
			</section>
		</section>

		<section id="use-case-custom-element"><div class="header-wrapper"><h2 id="x5-use-case-custom-element"><bdi class="secno">5. </bdi>Use Case Custom Element</h2><a class="self-link" href="#use-case-custom-element" aria-label="Permalink for Section 5."></a></div>
			
			<section id="background-and-current-practice-2"><div class="header-wrapper"><h3 id="x5-1-background-and-current-practice"><bdi class="secno">5.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice-2" aria-label="Permalink for Section 5.1"></a></div>
				
				<p>Embed valid SSML in HTML using custom elements registered as ssml-* where * is the actual SSML tag name (except for p which expects the same treatment as an HTML p in HTML layout).</p>
			</section>
			<section id="goal-2"><div class="header-wrapper"><h3 id="x5-2-goal"><bdi class="secno">5.2 </bdi>Goal</h3><a class="self-link" href="#goal-2" aria-label="Permalink for Section 5.2"></a></div>
				
				<p>Support use of SSML in HTML documents.</p>
			</section>
			<section id="target-audience-2"><div class="header-wrapper"><h3 id="x5-3-target-audience"><bdi class="secno">5.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience-2" aria-label="Permalink for Section 5.3"></a></div>
				
				<ul>
					<li>SSML-aware technologies and browser extensions</li>
					<li>Search indexers</li>
				</ul>
			</section>
			<section id="implementation-options-2"><div class="header-wrapper"><h3 id="x5-4-implementation-options"><bdi class="secno">5.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options-2" aria-label="Permalink for Section 5.4"></a></div>
				
				<p><strong>ssml-speak: see <a href="https://ssml-components.glitch.me">demo</a> </strong></p>
				<p>Only the &lt;ssml-speak&gt; component requires registration. The component code lifts the SSML by getting the innerHTML and removing the ssml- prefix from the interior tags and passing it to the web speech API. The &lt;p&gt; tag from SSML is not given the prefix because we still want to start a semantic paragraph within the content. The other tags used in the example have no semantic meaning. Tags like &lt;em&gt; in HTML could be converted to &lt;emphasis&gt; in SSML. In that case, CSS styles will come from the browser's default styles or the page author.</p>
				<div class="example" id="example-18">
        <div class="marker">
    <a class="self-link" href="#example-18">Example<bdi> 18</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">ssml-speak</span>&gt;</span>
  Here are <span class="hljs-tag">&lt;<span class="hljs-name">ssml-say-as</span> <span class="hljs-attr">interpret-as</span>=<span class="hljs-string">"characters"</span>&gt;</span>SSML<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-say-as</span>&gt;</span> samples.
  I can pause<span class="hljs-tag">&lt;<span class="hljs-name">ssml-break</span> <span class="hljs-attr">time</span>=<span class="hljs-string">"3s"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ssml-break</span>&gt;</span>.
  I can speak in cardinals.
  Your number is <span class="hljs-tag">&lt;<span class="hljs-name">ssml-say-as</span> <span class="hljs-attr">interpret-as</span>=<span class="hljs-string">"cardinal"</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-say-as</span>&gt;</span>.
  Or I can speak in ordinals.
  You are <span class="hljs-tag">&lt;<span class="hljs-name">ssml-say-as</span> <span class="hljs-attr">interpret-as</span>=<span class="hljs-string">"ordinal"</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-say-as</span>&gt;</span> in line.
  Or I can even speak in digits.
  The digits for ten are <span class="hljs-tag">&lt;<span class="hljs-name">ssml-say-as</span> <span class="hljs-attr">interpret-as</span>=<span class="hljs-string">"characters"</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-say-as</span>&gt;</span>.
  I can also substitute phrases, like the <span class="hljs-tag">&lt;<span class="hljs-name">ssml-sub</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"World Wide Web Consortium"</span>&gt;</span>W3C<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-sub</span>&gt;</span>.
  Finally, I can speak a paragraph with two sentences.
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ssml-s</span>&gt;</span>You say, <span class="hljs-tag">&lt;<span class="hljs-name">ssml-phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"pɪˈkɑːn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-phoneme</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-s</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ssml-s</span>&gt;</span>I say, <span class="hljs-tag">&lt;<span class="hljs-name">ssml-phoneme</span> <span class="hljs-attr">alphabet</span>=<span class="hljs-string">"ipa"</span> <span class="hljs-attr">ph</span>=<span class="hljs-string">"ˈpi.kæn"</span>&gt;</span>pecan<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-phoneme</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-s</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ssml-speak</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ssml-controls"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">
    <span class="hljs-selector-attr">[role=<span class="hljs-string">"switch"</span>]</span><span class="hljs-selector-attr">[aria-checked=<span class="hljs-string">"true"</span>]</span> <span class="hljs-selector-pseudo">:first-child</span>,
    <span class="hljs-selector-attr">[role=<span class="hljs-string">"switch"</span>]</span><span class="hljs-selector-attr">[aria-checked=<span class="hljs-string">"false"</span>]</span> <span class="hljs-selector-pseudo">:last-child</span> {
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"play"</span>&gt;</span>Speak<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"switch"</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">"play"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>on<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>off<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></code></pre>
      </div>
				<div class="example" id="example-19">
        <div class="marker">
    <a class="self-link" href="#example-19">Example<bdi> 19</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SSMLSpeak</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-keyword">const</span> template = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'ssml-controls'</span>);
    <span class="hljs-keyword">const</span> templateContent = template.<span class="hljs-property">content</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachShadow</span>({<span class="hljs-attr">mode</span>: <span class="hljs-string">'open'</span>})
      .<span class="hljs-title function_">appendChild</span>(templateContent.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>));
  }
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'[role="switch"][aria-labelledby="play"]'</span>)
    <span class="hljs-keyword">const</span> ssml = <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/ssml-/gm</span>, <span class="hljs-string">''</span>)
    <span class="hljs-keyword">const</span> msg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeechSynthesisUtterance</span>();
    msg.<span class="hljs-property">lang</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">lang</span>;
    msg.<span class="hljs-property">text</span> = <span class="hljs-string">`&lt;speak version="1.1"
      xmlns="http://www.w3.org/2001/10/synthesis"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
        http://www.w3.org/TR/speech-synthesis11/synthesis.xsd"
      xml:lang="<span class="hljs-subst">${msg.lang}</span>"&gt;
    <span class="hljs-subst">${ssml}</span>
    &lt;/speak&gt;`</span>;
    msg.<span class="hljs-property">voice</span> = speechSynthesis.<span class="hljs-title function_">getVoices</span>().<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">voice</span> =&gt;</span> voice.<span class="hljs-property">lang</span>.<span class="hljs-title function_">startsWith</span>(msg.<span class="hljs-property">lang</span>));
    msg.<span class="hljs-property">onstart</span> = <span class="hljs-function">() =&gt;</span> button.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'true'</span>);
    msg.<span class="hljs-property">onend</span> = <span class="hljs-function">() =&gt;</span> button.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'aria-checked'</span>, <span class="hljs-string">'false'</span>);
    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> speechSynthesis[speechSynthesis.<span class="hljs-property">speaking</span> ? <span class="hljs-string">'cancel'</span> : <span class="hljs-string">'speak'</span>](msg))
  }
}

customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">'ssml-speak'</span>, <span class="hljs-title class_">SSMLSpeak</span>);</code></pre>
      </div>
			</section>
			<section id="existing-work-2"><div class="header-wrapper"><h3 id="x5-5-existing-work"><bdi class="secno">5.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work-2" aria-label="Permalink for Section 5.5"></a></div>
				
				<ul>
					<li><a href="https://dom.spec.whatwg.org/#concept-element-custom">DOM Living Standard</a></li>
					<li><a href="https://w3c.github.io/speech-api/">Web Speech API</a></li>
				</ul>
			</section>
			<section id="problems-and-limitations-2"><div class="header-wrapper"><h3 id="x5-6-problems-and-limitations"><bdi class="secno">5.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations-2" aria-label="Permalink for Section 5.6"></a></div>
				
				<ul>
					<li>OS/Browsers combinations that do not support the serialized XML usage of the Web Speech API.</li>
					<li>Browsers may need to map SSML tags with CSS styles for default user agent styles.</li>
					<li>Without an extension or AT, only user interaction can start the Web Speech API.</li>
					<li>Authors or parsing may need to remove HTML content with unintended SSML semantics before serialization.</li>
				</ul>
			</section>
		</section>

		<section id="use-case-json-ld"><div class="header-wrapper"><h2 id="x6-use-case-json-ld"><bdi class="secno">6. </bdi>Use Case JSON-LD</h2><a class="self-link" href="#use-case-json-ld" aria-label="Permalink for Section 6."></a></div>
			
			<section id="background-and-current-practice-3"><div class="header-wrapper"><h3 id="x6-1-background-and-current-practice"><bdi class="secno">6.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice-3" aria-label="Permalink for Section 6.1"></a></div>
				
				<p><a href="https://www.w3.org/2018/jsonld-cg-reports/json-ld/">JSON-LD</a> provides an established standard for embedding data in HTML. Unlike other microdata approaches, JSON-LD helps to reuse standardized annotations through external references.</p>
			</section>
			<section id="goal-3"><div class="header-wrapper"><h3 id="x6-2-goal"><bdi class="secno">6.2 </bdi>Goal</h3><a class="self-link" href="#goal-3" aria-label="Permalink for Section 6.2"></a></div>
				
				<p>Support use of SSML in HTML documents.</p>
			</section>
			<section id="target-audience-3"><div class="header-wrapper"><h3 id="x6-3-target-audience"><bdi class="secno">6.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience-3" aria-label="Permalink for Section 6.3"></a></div>
				
				<ul>
					<li>SSML-aware technologies and browser extensions</li>
					<li>Search indexers</li>
				</ul>
			</section>
			<section id="implementation-options-3"><div class="header-wrapper"><h3 id="x6-4-implementation-options"><bdi class="secno">6.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options-3" aria-label="Permalink for Section 6.4"></a></div>
				
				<p><strong>JSON-LD</strong></p>
				<div class="example" id="example-20">
        <div class="marker">
    <a class="self-link" href="#example-20">Example<bdi> 20</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/ld+json"</span>&gt;</span><span class="language-javascript">
{
  <span class="hljs-string">"@context"</span>: <span class="hljs-string">"http://schema.org/"</span>,
  <span class="hljs-string">"@id"</span>: <span class="hljs-string">"/pronunciation#WKRP"</span>,
  <span class="hljs-string">"@type"</span>: <span class="hljs-string">"RadioStation"</span>,
  <span class="hljs-string">"name"</span>: [<span class="hljs-string">"WKRP"</span>,
    <span class="hljs-string">"@type"</span>: <span class="hljs-string">"PronounceableText"</span>,
    <span class="hljs-string">"textValue"</span>: <span class="hljs-string">"WKRP"</span>,
    <span class="hljs-string">"speechToTextMarkup"</span>: <span class="hljs-string">"SSML"</span>,
    <span class="hljs-string">"phoneticText"</span>: <span class="hljs-string">"&lt;speak&gt;&lt;say-as interpret-as=\"characters\"&gt;WKRP&lt;/say-as&gt;"</span>
  ]
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  Do you listen to <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">itemscope</span>
    <span class="hljs-attr">itemtype</span>=<span class="hljs-string">"http://schema.org/PronounceableText"</span>
    <span class="hljs-attr">itemid</span>=<span class="hljs-string">"/pronunciation#WKRP"</span>&gt;</span>WKRP<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>?
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
			</section>
			<section id="existing-work-3"><div class="header-wrapper"><h3 id="x6-5-existing-work"><bdi class="secno">6.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work-3" aria-label="Permalink for Section 6.5"></a></div>
				
				<ul>
					<li>
						<a href="https://www.w3.org/WoT/WG/">Web of Things Working Group</a>
					</li>
					<li>
						<a href="https://webschemas.org/PronounceableText">Schema.org PronounceableText</a>
					</li>
				</ul>
			</section>
			<section id="problems-and-limitations-3"><div class="header-wrapper"><h3 id="x6-6-problems-and-limitations"><bdi class="secno">6.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations-3" aria-label="Permalink for Section 6.6"></a></div>
				
				<p>not an established "type"/published schema</p>
			</section>
		</section>
		<section id="use-case-ruby"><div class="header-wrapper"><h2 id="x7-use-case-ruby"><bdi class="secno">7. </bdi>Use Case Ruby</h2><a class="self-link" href="#use-case-ruby" aria-label="Permalink for Section 7."></a></div>
			
			<section id="background-and-current-practice-4"><div class="header-wrapper"><h3 id="x7-1-background-and-current-practice"><bdi class="secno">7.1 </bdi>Background and Current Practice</h3><a class="self-link" href="#background-and-current-practice-4" aria-label="Permalink for Section 7.1"></a></div>
				
				<blockquote>&lt;Ruby&gt; annotations are short runs of text presented alongside base text, primarily used in East Asian typography as a guide for pronunciation or to include other annotations.</blockquote>
				<p>ruby guides pronunciation visually. This seems like a natural fit for text-to-speech.</p>
			</section>
			<section id="goal-4"><div class="header-wrapper"><h3 id="x7-2-goal"><bdi class="secno">7.2 </bdi>Goal</h3><a class="self-link" href="#goal-4" aria-label="Permalink for Section 7.2"></a></div>
				
				<ul>
					<li>Support use of SSML in HTML documents.</li>
					<li>Offer visual pronunciation support.</li>
				</ul>
			</section>
			<section id="target-audience-4"><div class="header-wrapper"><h3 id="x7-3-target-audience"><bdi class="secno">7.3 </bdi>Target Audience</h3><a class="self-link" href="#target-audience-4" aria-label="Permalink for Section 7.3"></a></div>
				
				<ul>
					<li>AT and browser extensions</li>
					<li>Search indexers</li>
				</ul>
			</section>
			<section id="implementation-options-4"><div class="header-wrapper"><h3 id="x7-4-implementation-options"><bdi class="secno">7.4 </bdi>Implementation Options</h3><a class="self-link" href="#implementation-options-4" aria-label="Permalink for Section 7.4"></a></div>
				
				<p><strong>ruby with microdata</strong></p>
				<p>Microdata can augment the ruby element and its descendants.</p>
				<div class="example" id="example-21">
        <div class="marker">
    <a class="self-link" href="#example-21">Example<bdi> 21</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  You say,
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">itemscope</span>=<span class="hljs-string">""</span> <span class="hljs-attr">itemtype</span>=<span class="hljs-string">"http://example.org/Pronunciation"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ruby</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"phoneme"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"pecan"</span>&gt;</span>
      pecan
      <span class="hljs-tag">&lt;<span class="hljs-name">rt</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"ph"</span>&gt;</span>pɪˈkɑːn<span class="hljs-tag">&lt;/<span class="hljs-name">rt</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"alphabet"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ipa"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ruby</span>&gt;</span>.
  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  I say,
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">itemscope</span>=<span class="hljs-string">""</span> <span class="hljs-attr">itemtype</span>=<span class="hljs-string">"http://example.org/Pronunciation"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ruby</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"phoneme"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"pecan"</span>&gt;</span>
      pe
      <span class="hljs-tag">&lt;<span class="hljs-name">rt</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"ph"</span>&gt;</span>ˈpi<span class="hljs-tag">&lt;/<span class="hljs-name">rt</span>&gt;</span>
      can
      <span class="hljs-tag">&lt;<span class="hljs-name">rt</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"ph"</span>&gt;</span>kæn<span class="hljs-tag">&lt;/<span class="hljs-name">rt</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">itemprop</span>=<span class="hljs-string">"alphabet"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ipa"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ruby</span>&gt;</span>.
  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre>
      </div>
			</section>
			<section id="existing-work-4"><div class="header-wrapper"><h3 id="x7-5-existing-work"><bdi class="secno">7.5 </bdi>Existing Work</h3><a class="self-link" href="#existing-work-4" aria-label="Permalink for Section 7.5"></a></div>
				
				<ul>
					<li><a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-ruby-element">HTML Living Standard</a></li>
					<li><a href="https://schema.org/">Schema.org</a></li>
				</ul>
			</section>
			<section id="problems-and-limitations-4"><div class="header-wrapper"><h3 id="x7-6-problems-and-limitations"><bdi class="secno">7.6 </bdi>Problems and Limitations</h3><a class="self-link" href="#problems-and-limitations-4" aria-label="Permalink for Section 7.6"></a></div>
				
				<ul>
					<li>AT may process annotations as content</li>
					<li>AT "double reading" words instead of choosing either the content or the annotation</li>
					<li>Only offers for a few SSML expressions</li>
					<li>Difficult to reuse by reference</li>
				</ul>
			</section>
		</section>
		
		<section id="user-scenarios"><div class="header-wrapper"><h2 id="x8-user-scenarios"><bdi class="secno">8. </bdi>User Scenarios</h2><a class="self-link" href="#user-scenarios" aria-label="Permalink for Section 8."></a></div>
			
			<p>The purpose of developing user scenarios is to facilitate discussion and further requirements definition for pronunciation standards developed within the PTF prior to review of the APA. There are numerous interpretations of what form user scenarios adopt. Within the user experience research (UXR) body of practice, a user scenario is a written narrative related to the use of a service from the perspective of a user or user group. Importantly, the context of use is emphasized as is the desired outcome of use. There are potentially thousands of user scenarios for a technology such as TTS, however, the focus for the PTF is on the core scenarios that relate to the kinds of users who will engage with TTS.</p>
			<p>User scenarios, like Personas, represent a composite of real-world experiences. In the case of the PTF, the scenarios were derived from interviews of people who were end-consumers of TTS, as well as submitted narratives and industry examples from practitioners. There are several formats of scenarios. Several are general goal or task-oriented scenarios. Others elaborate on richer context, for example, educational assessment.</p>
			<p>The following user scenarios are organized on the three perspectives of TTS use derived from analysis of the qualitative data collected from the discovery work:</p>
			<ul>
				<li><strong>End-Consumers of TTS: </strong>Encompasses those with a visual disability or other need to have TTS operational when using assistive technologies (ATs).</li>
				<li><strong>Digital Content Managers: </strong>Addresses activities related to those responsible for producing content that needs to be accessible to ATs and <abbr title="World Wide Web Consortium">W3C</abbr>-WAI Guidelines.</li>
				<li><strong>Software Engineers: </strong>Includes developers and architects required to put TTS into an application or service.</li>
			</ul>
			<section id="end-consumer-of-tts"><div class="header-wrapper"><h3 id="x8-1-end-consumer-of-tts"><bdi class="secno">8.1 </bdi>End-Consumer of TTS</h3><a class="self-link" href="#end-consumer-of-tts" aria-label="Permalink for Section 8.1"></a></div>
				
				<p>Ultimately, the quality and variation of TTS rendering by assistive technologies vary widely according to a user's context. The following user scenarios reinforce the necessity for accurate pronunciation from the perspective of those who consume digitally generated content.</p>
				<ul>
					<li>A.	As a traveler who uses assistive technology (AT) with TTS to help navigate through websites, I need to hear arrival and destination codes pronounced accurately so I can select the desired travel itinerary. For example, a user with a visual impairment attempts to book a flight to Ottawa, Canada and so goes to a travel website. The user already knows the airport code and enters "YOW". The site produces the result in a drop-down list as "Ottawa, CA" but the AT does not pronounce the text accurately to help the user make the correct association between their data entry and the list item. </li>
					<li>B.	As a test taker (tester) with a visual impairment who may use assistive technology to access the test content with speech software, screen reader or refreshable braille device, I want the content to be presented as intended, with accurate pronunciation and articulation, so that my assessment accurately reflects my knowledge of the content.</li>
					<li>C.	As a student/learner with auditory and cognitive processing issues, it is difficult to distinguish sounds, inflections, and variations in pronunciation as rendered through synthetic voice, such as text-to-speech or screen reader technologies. Consistent and accurate pronunciation whether human-provided, external, or embedded is needed to support working executive processing, auditory processing and memory that facilitates comprehension in literacy and numeracy for learning and for assessments.</li>
					<li>D.	As an English Learner (EL) or a visually impaired early learner using speech synthesis for reading comprehension that includes decoding words from letters as part of the learning construct (intent of measurement), pronunciation accuracy is vital to successful comprehension, as it allows the learner to distinguish sounds at the sentence, word, syllable, and phoneme level.</li>
				</ul>
			
			</section>
			<section id="digital-content-management-for-tts"><div class="header-wrapper"><h3 id="x8-2-digital-content-management-for-tts"><bdi class="secno">8.2 </bdi>Digital Content Management for TTS</h3><a class="self-link" href="#digital-content-management-for-tts" aria-label="Permalink for Section 8.2"></a></div>
				
				<p>The advent of graphical user interfaces (GUIs) for the management and editing of text content has given rise to content creators not requiring technical expertise beyond the ability to operate a text editing application such as Microsoft Word. The following scenario summarizes the general use, accompanied by a hypothetical application. </p>
				<ul>
					<li>A.	As a content creator, I want to create content that can readily be delivered through assistive technology, can convey the correct meaning, and ensure that screen readers render the right pronunciation based on the surrounding context. </li>
					<li>B.	As a content producer for a global commercial site that is inclusive, I need to be able to provide accessible culture-specific content for different geographic regions.</li>
				</ul>

				<section id="educational-assessment"><div class="header-wrapper"><h4 id="x8-2-1-educational-assessment"><bdi class="secno">8.2.1 </bdi>Educational Assessment</h4><a class="self-link" href="#educational-assessment" aria-label="Permalink for Section 8.2.1"></a></div>
					
					<p>In the educational assessment field, providing accurate and concise pronunciation for students with auditory accommodations, such as text-to-speech (TTS) or students with screen readers, is vital for ensuring content validity and alignment with the intended construct, which objectively measures a test takers knowledge and skills. For test administrators/educators, pronunciations must be consistent across instruction and assessment in order to avoid test bias or impact effects for students. Some additional requirements for the test administrators, include, but are not limited to, such scenarios:</p>
					
					<ul>
						<li>A.	As a test administrator, I want to ensure that students with the read-aloud accommodation, who are using assistive technology or speech synthesis as an alternative to a human reader, have the same speech quality (e.g., intonation, expression, pronunciation, and pace, etc.) as a spoken language.</li>
						<li>B.	As a math educator, I want to ensure that speech accuracy with mathematical expressions, including numbers, fractions, and operations have accurate pronunciation for those who rely on TTS. Some mathematical expressions require special pronunciations to ensure accurate interpretation while maintaining test validity and construct. Specific examples include:
							<ul>
								<li>Mathematical formulas written in simple text with special formatting should convey the correct meaning of the expression to identify changes from normal text to super- or to sub-script text. For example, without the proper formatting, the equation:<code>a<sup>3</sup>-b<sup>3</sup>=(a-b)(a<sup>2</sup>+ab+b<sup>2</sup>)</code> may incorrectly render through some technologies and applications as a3-b3=(a-b)(a2+ab+b2).</li>
								<li>Distinctions made in writing are often not made explicit in speech; For example, “fx” may be interpreted as fx, f(x), fx, F X, F X. The distinction depends on the context; requiring the author to provide consistent and accurate semantic markup.</li>
								<li>For math equations with Greek letters, it is important that the speech synthesizer be able to distinguish the phonetic differences between them, whether in the natural language or phonetic equivalents. For example, ε (epsilon) υ (upsilon) φ (phi) χ (chi) ξ(xi).</li>
							</ul>

						</li>
						<li>C.	As a test administrator/educator, pronunciations must be consistent across instruction and assessment, in order to avoid test bias and pronunciation effects on performance for students with disabilities (SWD) in comparison to students without disabilities (SWOD). Examples include:
							<ul>
								<li>If a test question is measuring rhyming of words or sounds of words, the speech synthesis should not read aloud the words, but rather spell out the words in the answer options.</li>
								<li>If a test question is measuring spelling and the student needs to consider spelling correctness/incorrectness, the speech synthesis should not read aloud the misspelt words, especially for words, such as:
									<ul>
										<li><strong>Heteronyms/homographs</strong>: same spelling, different pronunciation, different meanings, such as lead (to go in front of) or lead (a metal); wind (to follow a course that is not straight) or wind (a gust of air); bass (low, deep sound) or bass (a type of fish), etc.</li>
										<li><strong>Homophone</strong>: words that sound alike, such as, to/two/too; there/their/they're; pray/prey; etc.</li>
										<li><strong>Homonyms</strong>: multiple meaning words, such as scale (measure) or scale (climb, mount); fair (reasonable) or fair (carnival); suit (outfit) or suit (harmonize); etc.</li>
									</ul>

								</li>
							</ul>

						</li>
					</ul>
					
				</section>
				<section id="academic-and-linguistic-practitioners"><div class="header-wrapper"><h4 id="x8-2-2-academic-and-linguistic-practitioners"><bdi class="secno">8.2.2 </bdi>Academic and Linguistic Practitioners </h4><a class="self-link" href="#academic-and-linguistic-practitioners" aria-label="Permalink for Section 8.2.2"></a></div>
					
					<p>The extension of content management in TTS is one as a means of encoding and preserving spoken text for academic analyses; irrespective of discipline, subject domain, or research methodology.</p>
					<ul>
						<li>A.	As a linguist, I want to represent all the pronunciation variations of a given word in any language, for future analyses.</li>
						<li>B.	As a speech language pathologist or speech therapists, I want TTS functionality to include components of speech and language that include dialectal and individual differences in pronunciation; identify differences in intonation, syntax, and semantics, and; allow for enhanced comprehension, language processing and support phonological awareness.</li>
					</ul>
				</section>

			</section>
			<section id="software-application-development"><div class="header-wrapper"><h3 id="x8-3-software-application-development"><bdi class="secno">8.3 </bdi>Software Application Development</h3><a class="self-link" href="#software-application-development" aria-label="Permalink for Section 8.3"></a></div>
				
				<p>Technical standards for software development assist organizations and individuals to provide accessible experiences for users with disabilities. The final user scenarios in this document are considered from the perspective of those who design and develop software. </p>
				<ul>
					<li>A.	As a Product Owner for a web content management system (CMS), I want the next software product release to have the capability of pronouncing speech "just like Alexa can".</li>
					<li>B.	As a client-side user interface developer, I need a way to render text content, so it is spoken accurately with assistive technologies. </li>
				</ul>
			</section>
		</section>

		<section class="appendix informative section" id="acknowledgements"><div class="header-wrapper"><h2 id="a-acknowledgments"><bdi class="secno">A. </bdi>Acknowledgments</h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Appendix A."></a></div><p><em>This section is non-normative.</em></p>
	
	<p>The following people contributed to the development of this document.</p>
	<section class="section" id="ack_group"><div class="header-wrapper"><h3 id="a-1-participants-active-in-the-pronunciation-tf-at-the-time-of-publication"><bdi class="secno">A.1 </bdi>Participants active in the Pronunciation TF at the time of publication</h3><a class="self-link" href="#ack_group" aria-label="Permalink for Appendix A.1"></a></div>
		
		<ul>
			<li>Irfan Ali (BlackRock)</li>
			<li>Michael Cooper (<abbr title="World Wide Web Consortium">W3C</abbr>/MIT)</li>
			<li>Dee Dyer (Educational Testing Service)</li>
			<li>Markku Hakkinen (Educational Testing Service)</li>
			<li>Christine Loew (Invited Expert)</li>
			<li>Steve Noble (Pearson plc)</li>
			<li>Roy Ran (<abbr title="World Wide Web Consortium">W3C</abbr>/Beihang)</li>
			<li>Janina Sajka (<abbr title="World Wide Web Consortium">W3C</abbr> invited expert)</li>
			<li>John Foliot (Invited Expert)</li>
			<li>Paul Grenier (Invited Expert)</li>
			<li>Sam Kanta (Invited Expert)</li>
			<li>Neil Soiffer (Invited Expert)</li>
			<li>Léonie, Watson (TetraLogical)</li>
			<li>Tom Babinszki (UnitedHealth Group)</li>
			<li>Paul Bohman (Deque Systems, Inc.)</li>
			<li>Becky Gibson (<abbr title="World Wide Web Consortium">W3C</abbr> Invited Expert)</li>
			<li>Alan Reeve (Invited Expert)</li>

		</ul>
  </section>
</section>


	
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-highlight-vars">(() => {
// @ts-check

if (document.respec) {
  document.respec.ready.then(setupVarHighlighter);
} else {
  setupVarHighlighter();
}

function setupVarHighlighter() {
  document
    .querySelectorAll("var")
    .forEach(varElem => varElem.addEventListener("click", highlightListener));
}

function highlightListener(ev) {
  ev.stopPropagation();
  const { target: varElem } = ev;
  const hightligtedElems = highlightVars(varElem);
  const resetListener = () => {
    const hlColor = getHighlightColor(varElem);
    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
  };
  if (hightligtedElems.length) {
    document.body.addEventListener("click", resetListener, { once: true });
  }
}

// availability of highlight colors. colors from var.css
const HL_COLORS = new Map([
  ["respec-hl-c1", true],
  ["respec-hl-c2", true],
  ["respec-hl-c3", true],
  ["respec-hl-c4", true],
  ["respec-hl-c5", true],
  ["respec-hl-c6", true],
  ["respec-hl-c7", true],
]);

function getHighlightColor(target) {
  // return current colors if applicable
  const { value } = target.classList;
  const re = /respec-hl-\w+/;
  const activeClass = re.test(value) && value.match(re);
  if (activeClass) return activeClass[0];

  // first color preference
  if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

  // otherwise get some other available color
  return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
}

function highlightVars(varElem) {
  const textContent = norm(varElem.textContent);
  const parent = varElem.closest(".algorithm, section");
  const highlightColor = getHighlightColor(varElem);

  const varsToHighlight = [...parent.querySelectorAll("var")].filter(
    el =>
      norm(el.textContent) === textContent &&
      el.closest(".algorithm, section") === parent
  );

  // update availability of highlight color
  const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
  HL_COLORS.set(highlightColor, colorStatus);

  // highlight vars
  if (colorStatus) {
    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
    return [];
  } else {
    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
  }
  return varsToHighlight;
}

function removeHighlight(el, highlightColor) {
  el.classList.remove("respec-hl", highlightColor);
  // clean up empty class attributes so they don't come in export
  if (!el.classList.length) el.removeAttribute("class");
}

function addHighlight(elem, highlightColor) {
  elem.classList.add("respec-hl", highlightColor);
}

/**
 * Same as `norm` from src/core/utils, but our build process doesn't allow
 * imports in runtime scripts, so duplicated here.
 * @param {string} str
 */
function norm(str) {
  return str.trim().replace(/\s+/g, " ");
}
})()</script><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>